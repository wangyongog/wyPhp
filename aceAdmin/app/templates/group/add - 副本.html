{include file="public/header.html"}


		<div class="main-container ace-save-state" id="main-container">
			<script type="text/javascript">
				try{
					ace.settings.loadState('main-container')
					}catch(e){
				}
			</script>
		


			<div class="main-content">
				<div class="main-content-inner">
					

					<div class="page-content">
					

						<div class="page-header">
                            
						</div><!-- /.page-header -->

						<div class="row">
							<div class="col-xs-12">
								
                                    
                                    <form class="form-horizontal" id="form" name="form" action="{U('group/add')}" method="post">
                                        <div class="form-group">
                                            <label class="col-sm-1 control-label no-padding-right" for="form-field-1"> 用户组名 </label>
                                            <div class="col-sm-9">
                                                <input type="text" name="title" id="title" placeholder="用户组名" class="col-xs-10 col-sm-5" value="{$data.title}">
                                                <input type="hidden" name="groupid" id="groupid" value="{$data.groupid}">
                                                <span class="help-inline col-xs-12 col-sm-7">
                                                            <span class="middle">用户组名称，不能为空。</span>
                                                        </span>
                                            </div>
                                        </div>
                                        
                                        <div class="space-4"></div>
                                        <div class="form-group">
                                            <label class="col-sm-1 control-label no-padding-right" for="form-field-2"> 是否启用 </label>
                                            <div class="control-label no-padding-left col-sm-1">
                                                <label>
                                                    <input name="status" id="status"  {if $data.status eq 1} checked="checked"{/if} class="ace ace-switch ace-switch-2" type="checkbox">
                                                    <span class="lbl"></span>
                                                </label>
                                            </div>
                                            <span class="help-inline col-xs-12 col-sm-7">
                                                            <span class="middle">YES，启用；NO，禁用</span>
                                                    </span>
                                        </div>
                    
                                            
                                         
                                        <div class="space-4"></div>
            
                                            <div class="form-group">
                                                <label class="col-sm-1 control-label no-padding-right" for="form-field-1">
                                                    权限选择 </label>
                                                <div class="col-sm-9">
                                                    <div class="col-sm-10">
                                                    {foreach from=$sidebarlist key=k item=val}
                                                        <div class="row">
                                                                <div class="widget-box">
                                                                    <div class="widget-header">
                                                                        <h4 class="widget-title">
                                                                            <label>
                                                                                <input name="rules[]" class="ace ace-checkbox-2 father" type="checkbox" value="{$val['id']}">
                                                                                <span class="lbl"> {$val.title}</span>
                                                                            </label>
                                                                        </h4>
                                                                       <div class="widget-toolbar">
                                                                            {if !empty($val.children)}
                                                                                <a href="#" data-action="collapse">
                                                                                    <i class="ace-icon fa fa-chevron-up"></i>
                                                                                </a>
                                                                            {/if}
                                                                        </div>
                                                                    </div>
                                                                    {if !empty($val.children)}
                                                                        <div class="widget-body">
                                                                            <div class="widget-main row">
                                                                                {foreach from=$val.children key=k item=vv}
                                                                                    <label class="col-xs-2" style="width:160px;">
                                                                                        <input name="rules[]" class="ace ace-checkbox-2 children"   type="checkbox" value="{$vv.id}">
                                                                                        <span class="lbl">{$vv.title}</span>
                                                                                    </label>
                                                                                {/foreach}    
                                                                            </div>
                                                                        </div>
                                                                    {/if}
                                                               </div>
                                                            </div>
                                                        {/foreach}    
                                                            
                                                   </div>
                                                </div>
                                            </div>
                                        
            
            <div id="demo" class="demo-tree"></div>
                                        <div class="col-md-offset-2 col-md-9">
                                            <button class="btn btn-info ajaxFrom" type="button">
                                                <i class="icon-ok bigger-110"></i>
                                                提交
                                            </button>
            
                                            &nbsp; &nbsp; &nbsp;
                                            <button class="btn" type="reset">
                                                <i class="icon-undo bigger-110"></i>
                                                重置
                                            </button>
                                        </div>
                                    </form>
                                    
							</div>
						</div>
					</div><!-- /.page-content -->
				</div>
			</div><!-- /.main-content -->


		{include file="public/footer.html"}
		</div><!-- /.main-container -->

		{include file="public/footerJs.html"}

<script type="text/javascript">
var data = [{
    title: '一级1'
    ,id: 1
    ,field: 'name1'
    ,checked: true
    ,spread: true
    ,children: [{
      title: '二级1-1 可允许跳转'
      ,id: 3
      ,field: 'name11'
      ,href: 'https://www.layui.com/'
      ,children: [{
        title: '三级1-1-3'
        ,id: 23
        ,field: ''
        ,children: [{
          title: '四级1-1-3-1'
          ,id: 24
          ,field: ''
          ,children: [{
            title: '五级1-1-3-1-1'
            ,id: 30
            ,field: ''
          },{
            title: '五级1-1-3-1-2'
            ,id: 31
            ,field: ''
          }]
        }]
      },{
        title: '三级1-1-1'
        ,id: 7
        ,field: ''
        ,children: [{
          title: '四级1-1-1-1 可允许跳转'
          ,id: 15
          ,field: ''
          ,href: 'https://www.layui.com/doc/'
        }]
      },{
        title: '三级1-1-2'
        ,id: 8
        ,field: ''
        ,children: [{
          title: '四级1-1-2-1'
          ,id: 32
          ,field: ''
        }]
      }]
    },{
      title: '二级1-2'
      ,id: 4
      ,spread: true
      ,children: [{
        title: '三级1-2-1'
        ,id: 9
        ,field: ''
        ,disabled: true
      },{
        title: '三级1-2-2'
        ,id: 10
        ,field: ''
      }]
    },{
      title: '二级1-3'
      ,id: 20
      ,field: ''
      ,children: [{
        title: '三级1-3-1'
        ,id: 21
        ,field: ''
      },{
        title: '三级1-3-2'
        ,id: 22
        ,field: ''
      }]
    }]
  },{
    title: '一级2'
    ,id: 2
    ,field: ''
    ,spread: true
    ,children: [{
      title: '二级2-1'
      ,id: 5
      ,field: ''
      ,spread: true
      ,children: [{
        title: '三级2-1-1'
        ,id: 11
        ,field: ''
      },{
        title: '三级2-1-2'
        ,id: 12
        ,field: ''
      }]
    },{
      title: '二级2-2'
      ,id: 6
      ,field: ''
      ,children: [{
        title: '三级2-2-1'
        ,id: 13
        ,field: ''
      },{
        title: '三级2-2-2'
        ,id: 14
        ,field: ''
        ,disabled: true
      }]
    }]
  },{
    title: '一级3'
    ,id: 16
    ,field: ''
    ,children: [{
      title: '二级3-1'
      ,id: 17
      ,field: ''
      ,fixed: true
      ,children: [{
        title: '三级3-1-1'
        ,id: 18
        ,field: ''
      },{
        title: '三级3-1-2'
        ,id: 19
        ,field: ''
      }]
    },{
      title: '二级3-2'
      ,id: 27
      ,field: ''
      ,children: [{
        title: '三级3-2-1'
        ,id: 28
        ,field: ''
      },{
        title: '三级3-2-2'
        ,id: 29
        ,field: ''
      }]
    }]
  }];
$(function () {
	layui.use('tree', function () {
		var tree = layui.tree;
		tree.render({
      elem: '#demo', //指定元素，生成的树放到哪个元素上
			check: 'checkbox', //勾选风格
			skin: 'as', //设定皮肤
			drag: true,//点击每一项时是否生成提示信息
			checkboxName: 'aa[]',//复选框的name属性值
			showCheckbox: true,
			checkboxStyle: "",//设置复选框的样式，必须为字符串，css样式怎么写就怎么写
			click: function(item) { //点击节点回调
				//var data1 = obj.data;
				console.log(item)
				//layer.msg('状态：' + obj.state + '<br>节点数据：' + JSON.stringify(data1));
			},
			onchange: function (){ //当当前input发生变化后所执行的回调
				console.log(this);
			},
			data:data
		})
	});
			
});
	


    $(".children").click(function () {
        $(this).parent().parent().parent().parent().find(".father").prop("checked", true);
    })
    $(".father").click(function () {
        if (this.checked) {
            $(this).parent().parent().parent().parent().find(".children").prop("checked", true);
        } else {
            $(this).parent().parent().parent().parent().find(".children").prop("checked", false);
        }
    })
</script>
		
	</body>
</html>
